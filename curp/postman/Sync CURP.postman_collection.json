{
	"info": {
		"_postman_id": "b31db9ce-9eb5-4acb-a5f3-852cd16757a0",
		"name": "Sync CURP",
		"description": "# Introduction\nWhat does your API do?\n\n# Overview\nThings that the developers should know about\n\n# Authentication\nWhat is the preferred way of using the API?\n\n# Error Codes\nWhat errors and status codes can a user expect?\n\n# Rate limit\nIs there a limit to the number of requests an user can send?",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Get users linked to an API key",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "c825dc3d-a7f2-4894-a0f7-3eae49e6f335",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "44742fd8-3471-4fdf-aee5-d1303517a3ad",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "api_key api_key={{sync_api_key}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "https://sync.paybook.com/v1/users",
					"protocol": "https",
					"host": [
						"sync",
						"paybook",
						"com"
					],
					"path": [
						"v1",
						"users"
					]
				}
			},
			"response": []
		},
		{
			"name": "Get Webhooks",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "86c59563-4dfa-4cb9-909e-5bf3f4095c4f",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "api_key api_key={{sync_api_key}}",
						"type": "text"
					},
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"url": {
					"raw": "https://sync.paybook.com/v1/webhooks",
					"protocol": "https",
					"host": [
						"sync",
						"paybook",
						"com"
					],
					"path": [
						"v1",
						"webhooks"
					]
				}
			},
			"response": []
		},
		{
			"name": "Creates Webhook",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "b55c6936-edd5-4c2a-a863-12a9f8cac2be",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Authorization",
						"value": "api_key api_key={{sync_api_key}}",
						"type": "text"
					},
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"api_key\" : \"{{sync_api_key}}\",\n    \"url\" : \"{{app_webhook_url}}\",\n    \"events\" : [\"documents_completed\"]\n}"
				},
				"url": {
					"raw": "https://sync.paybook.com/v1/webhooks",
					"protocol": "https",
					"host": [
						"sync",
						"paybook",
						"com"
					],
					"path": [
						"v1",
						"webhooks"
					]
				}
			},
			"response": []
		},
		{
			"name": "Creates a new user",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "09d79c8a-9022-4311-9dbd-1b4be94afe0e",
						"exec": [
							"var jsonData = JSON.parse(responseBody);",
							"if(jsonData.code === 200){",
							"    var jsonData = JSON.parse(responseBody);",
							"    user = jsonData.response;",
							"    pm.collectionVariables.set(\"sync_id_user\", user.id_user);",
							"}"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Authorization",
						"value": "api_key api_key={{sync_api_key}}",
						"type": "text"
					},
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"name\" : \"{{sync_username}}\"\n}"
				},
				"url": {
					"raw": "https://sync.paybook.com/v1/users",
					"protocol": "https",
					"host": [
						"sync",
						"paybook",
						"com"
					],
					"path": [
						"v1",
						"users"
					]
				}
			},
			"response": []
		},
		{
			"name": "Inits session",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "81faf845-eebd-486d-824e-f5032b1faeec",
						"exec": [
							"var jsonData = JSON.parse(responseBody);",
							"if(jsonData.code === 200){",
							"    var jsonData = JSON.parse(responseBody);",
							"    session = jsonData.response;",
							"    pm.collectionVariables.set(\"sync_token\", session.token);",
							"}"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"warning": "This is a duplicate header and will be overridden by the Authorization header generated by Postman.",
						"key": "Authorization",
						"value": "api_key api_key={{sync_api_key}}",
						"type": "text"
					},
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"id_user\" : \"{{sync_id_user}}\"\n}"
				},
				"url": {
					"raw": "https://sync.paybook.com/v1/sessions",
					"protocol": "https",
					"host": [
						"sync",
						"paybook",
						"com"
					],
					"path": [
						"v1",
						"sessions"
					]
				}
			},
			"response": []
		},
		{
			"name": "Create a new job for CURP from personal data",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "45a233a3-f390-4d63-a403-fc933a5a93fe",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{sync_token}}",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n\t\"id_site\" : \"{{sync_id_curp_site}}\",\n\t\"input_name\":\"personal_data\",\n\t\"input\" : {\n\t\t\"names\" : \"NOMBRE\",\n\t\t\"firstLastname\" : \"APELLIDO PATERNO\",\n\t\t\"secondLastname\" : \"APELLIDO MATERNO\",\n\t\t\"bornDay\" : \"DIA NACIMIENTO\",\n\t\t\"bornMonth\" : \"MES NACIMIENTO\",\n\t\t\"bornYear\" : \"AÑO NACIMIENTO\",\n\t\t\"gender\" : \"GÉNERO\",\n\t\t\"entityCode\" : \"ENTIDAD\"\n\t}\n}"
				},
				"url": {
					"raw": "https://sync.paybook.com/v1/jobs",
					"protocol": "https",
					"host": [
						"sync",
						"paybook",
						"com"
					],
					"path": [
						"v1",
						"jobs"
					]
				}
			},
			"response": []
		},
		{
			"name": "Create a new job for CURP from CURP",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "0886ab26-7103-4fb0-8668-c575d79e98b1",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{sync_token}}",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n\t\"id_site\" : \"{{sync_id_curp_site}}\",\n\t\"input_name\":\"Default\",\n\t\"input\" : {\n\t\t\"curp\" : \"[CURP]\"\n\t}\n}"
				},
				"url": {
					"raw": "https://sync.paybook.com/v1/jobs",
					"protocol": "https",
					"host": [
						"sync",
						"paybook",
						"com"
					],
					"path": [
						"v1",
						"jobs"
					]
				}
			},
			"response": []
		},
		{
			"name": "Download PDF Document",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "1dc37096-f0ac-44ab-9384-9ab317db8a26",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{sync_token}}",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://sync.paybook.com{{sync_documents_endpoint}}",
					"protocol": "https",
					"host": [
						"sync",
						"paybook",
						"com{{sync_documents_endpoint}}"
					]
				}
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "4e479418-7a20-40ab-943e-8815dee8c588",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "c4e8ba91-d94c-49ff-9129-68dc4d7a1ab0",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"id": "154701ef-a3a6-495e-a1d7-946738802b86",
			"key": "sync_api_key",
			"value": "",
			"type": "string"
		},
		{
			"id": "f76e3d67-9f98-4503-8df9-2690e9808561",
			"key": "app_webhook_url",
			"value": "",
			"type": "string"
		},
		{
			"id": "aa09352a-badd-4c51-bc58-8933e3bec1bc",
			"key": "sync_id_curp_site",
			"value": "5d4b57e7f9de2a0ad215fba2",
			"type": "string"
		},
		{
			"id": "b59ae999-2bcb-4323-b045-2cbbc6cdc913",
			"key": "sync_username",
			"value": "",
			"type": "string"
		},
		{
			"id": "c649aa25-c801-4eca-b0c7-b40b768f8031",
			"key": "sync_id_user",
			"value": "",
			"type": "string"
		},
		{
			"id": "c87c9dd4-2486-4d55-878b-85eba10b2e53",
			"key": "sync_token",
			"value": "",
			"type": "string"
		},
		{
			"id": "66fff72f-4df1-4ae3-9ad5-4dc282bfcf3a",
			"key": "sync_documents_endpoint",
			"value": "",
			"type": "string"
		}
	],
	"protocolProfileBehavior": {}
}